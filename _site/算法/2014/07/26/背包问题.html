<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <!--[if lte IE 9]><meta http-equiv="refresh" content="0;url=/ie.html"><![endif]-->

    <title>背包问题</title>
    <meta name="description" content="">

    <link rel="stylesheet" type="text/css" href="/assets/css/style.css">
  </head>
  <body>
    <aside id="sidebar">
      <nav id="tags">
        <a href="/index.html" id="avatar"></a>

        <ul id="tags__ul">
          <li id="js-label1" class="tags__li tags-btn active">所有文章 <span class="post_count"></span></li>
          <li id="js-label2" class="tags__li tags-btn">并发<span class="post_count"></span></li>
          <li id="js-label3" class="tags__li tags-btn">算法<span class="post_count"></span></li>
          <li id="js-label4" class="tags__li tags-btn">数据库<span class="post_count"></span></li>
          <li id="js-label5" class="tags__li tags-btn">cache<span class="post_count"></span></li>
          <li id="js-label6" class="tags__li tags-btn">c和os<span class="post_count"></span></li>
          <li id="js-label7" class="tags__li tags-btn">网络<span class="post_count"></span></li>
        </ul>

        <div id="tags__bottom">
          <a href="mailto:novohust@163.com" id="icon-email" class="tags-btn fontello"></a>
          <a href="/rss.xml" id="icon-feed" class="tags-btn fontello"></a>
        </div>
      </nav> <!-- end #tags -->

      <div id="posts-list">
        <form action="" id="search-form">
          <a href="/index.html" id="mobile-avatar"></a>
          <!-- NOTE: input field is disabled by default -->
          <input id="search-input" type="text" placeholder="Search..." disabled >
        </form>

        <nav id="pl__container">
        
          <a class="网络 pl__all" href="/%E7%BD%91%E7%BB%9C/2014/07/26/%E9%AB%98%E6%80%A7%E8%83%BD%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF%E7%AC%94%E8%AE%B0.html"><span class="pl__circle"></span><span class="pl__title">高性能网络通讯笔记</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/26/%E9%9D%9E%E9%80%92%E5%BD%92%E7%9A%84%E4%BA%8C%E5%8F%89%E6%A0%91%E9%81%8D%E5%8E%86.html"><span class="pl__circle"></span><span class="pl__title">非递归的二叉树遍历</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="网络 pl__all" href="/%E7%BD%91%E7%BB%9C/2014/07/26/%E9%93%BE%E8%B7%AF%E5%B1%82%20%E7%BD%91%E7%BB%9C%E5%B1%82%20UDP%20IO%E6%A8%A1%E5%9E%8B.html"><span class="pl__circle"></span><span class="pl__title">链路层 网络层 UDP IO模型</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/26/%E8%B4%9D%E5%8F%B6%E6%96%AF.html"><span class="pl__circle"></span><span class="pl__title">贝叶斯</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/26/%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98.html"><span class="pl__circle"></span><span class="pl__title">背包问题</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="c和os pl__all" href="/c%E5%92%8Cos/2014/07/26/%E7%BD%91%E5%8D%A1%E4%B8%AD%E6%96%AD%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1.html"><span class="pl__circle"></span><span class="pl__title">网卡中断负载均衡</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/26/%E7%BA%BF%E6%AE%B5%E6%A0%91.html"><span class="pl__circle"></span><span class="pl__title">线段树</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/26/%E6%A1%B6%E6%8E%92%E5%BA%8F%E5%9C%A8%E6%8E%92%E8%A1%8C%E6%A6%9C%E9%97%AE%E9%A2%98%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8.html"><span class="pl__circle"></span><span class="pl__title">桶排序在排行榜问题中的应用</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/26/%E5%B9%B6%E6%9F%A5%E9%9B%86.html"><span class="pl__circle"></span><span class="pl__title">并查集</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="并发 pl__all" href="/%E5%B9%B6%E5%8F%91/2014/07/26/%E5%B9%B6%E5%8F%91%E9%9B%86%E5%90%88.html"><span class="pl__circle"></span><span class="pl__title">并发集合</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="并发 pl__all" href="/%E5%B9%B6%E5%8F%91/2014/07/26/%E5%AE%9A%E6%97%B6%E5%99%A8%EF%BC%88Timer%EF%BC%89%E7%9A%84%E5%AE%9E%E7%8E%B0.html"><span class="pl__circle"></span><span class="pl__title">定时器（Timer）的实现</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/26/%E5%A0%86.html"><span class="pl__circle"></span><span class="pl__title">堆</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/26/%E5%9B%9E%E6%BA%AF.html"><span class="pl__circle"></span><span class="pl__title">回溯</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/26/%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%B4%A2%E5%BC%95%E6%A0%91(%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84).html"><span class="pl__circle"></span><span class="pl__title">二进制索引树(树状数组)</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="网络 pl__all" href="/%E7%BD%91%E7%BB%9C/2014/07/26/TCP.html"><span class="pl__circle"></span><span class="pl__title">TCP</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="网络 pl__all" href="/%E7%BD%91%E7%BB%9C/2014/07/26/RST%E5%8F%8Ajava%20socket%E5%85%B3%E9%97%AD%E5%90%8E%E8%AF%BB%E5%86%99%E7%9A%84%E5%90%84%E7%A7%8D%E5%BC%82%E5%B8%B8.html"><span class="pl__circle"></span><span class="pl__title">RST及java socket关闭后读写的各种异常</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="网络 pl__all" href="/%E7%BD%91%E7%BB%9C/2014/07/26/Netty3%20%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90.html"><span class="pl__circle"></span><span class="pl__title">Netty3 源码分析</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="网络 pl__all" href="/%E7%BD%91%E7%BB%9C/2014/07/26/Netty3%204%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%8C%BA%E5%88%AB.html"><span class="pl__circle"></span><span class="pl__title">Netty3 4线程模型的区别</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="数据库 pl__all" href="/%E6%95%B0%E6%8D%AE%E5%BA%93/2014/07/26/MySQL%E6%80%BB%E7%BB%93.html"><span class="pl__circle"></span><span class="pl__title">MySQL总结</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="c和os pl__all" href="/c%E5%92%8Cos/2014/07/26/Mode%20Switch%20%E5%92%8C%20Context%20Switch.html"><span class="pl__circle"></span><span class="pl__title">Mode Switch 和 Context Switch</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="并发 pl__all" href="/%E5%B9%B6%E5%8F%91/2014/07/26/Lock-Free%20%E7%AE%97%E6%B3%95.html"><span class="pl__circle"></span><span class="pl__title">Lock-Free 算法</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/26/LCA%20%E5%92%8C%20RMQ.html"><span class="pl__circle"></span><span class="pl__title">LCA 和 RMQ</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/26/KMP.html"><span class="pl__circle"></span><span class="pl__title">KMP</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="并发 pl__all" href="/%E5%B9%B6%E5%8F%91/2014/07/26/Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B.html"><span class="pl__circle"></span><span class="pl__title">Java内存模型</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="并发 pl__all" href="/%E5%B9%B6%E5%8F%91/2014/07/26/Java%20%E5%B9%B6%E5%8F%91%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html"><span class="pl__circle"></span><span class="pl__title">Java 并发基本知识</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="cache pl__all" href="/cache/2014/07/26/Http%E5%8D%8F%E8%AE%AE%E4%B8%AD%E7%9A%84cache%E6%9C%BA%E5%88%B6.html"><span class="pl__circle"></span><span class="pl__title">Http协议中的cache机制</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/26/Hash%20&%20Rabin-Karp%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95.html"><span class="pl__circle"></span><span class="pl__title">Hash & Rabin-Karp字符串查找算法</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="并发 pl__all" href="/%E5%B9%B6%E5%8F%91/2014/07/26/Executor%20%E4%B9%8B%20%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%8F%8A%E5%AE%9A%E6%97%B6%E5%99%A8.html"><span class="pl__circle"></span><span class="pl__title">Executor 之 线程池及定时器</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="c和os pl__all" href="/c%E5%92%8Cos/2014/07/26/C%E6%80%BB%E7%BB%93%20+%20%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98.html"><span class="pl__circle"></span><span class="pl__title">C总结 + 虚拟内存</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="cache pl__all" href="/cache/2014/07/26/Cache%20%E7%9B%B8%E5%85%B3%E7%90%86%E8%AE%BA.html"><span class="pl__circle"></span><span class="pl__title">Cache 相关理论</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="c和os pl__all" href="/c%E5%92%8Cos/2014/07/26/CPU%20Cache%20%E4%B8%8E%20%E5%AD%98%E5%82%A8%E5%99%A8%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84.html"><span class="pl__circle"></span><span class="pl__title">CPU Cache 与 存储器层次结构</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="并发 pl__all" href="/%E5%B9%B6%E5%8F%91/2014/07/26/AQS%20%E5%92%8C%20%E9%AB%98%E7%BA%A7%E5%90%8C%E6%AD%A5%E5%99%A8.html"><span class="pl__circle"></span><span class="pl__title">AQS 和 高级同步器</span><span class="pl__date">Jul 2014</span></a>
        
        </nav>
      </div> <!-- end #posts-list -->
    </aside> <!-- end #sidebar -->

    <div id="post">
      <div id="pjax">
        <article id="post__content">
  <h1 id="post__title" data-identifier="20140726">背包问题</h1>
  <div style="line-height: 1.6; font-family: Helvetica Neue, Arial, Hiragino Sans GB, STHeiti, Microsoft YaHei, WenQuanYi Micro Hei, SimSun, Song, sans-serif;">
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">本文主要讨论01背包/完全背包/多重背包，及在此之上一些常见的变种问题，更复杂的不做讨论。</p>
<h1 style="font-size: 36px; margin: 0.67em 0; font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 30px; margin-bottom: 20px;">一. 01背包</h1>
<h2 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 30px; margin-bottom: 20px; font-size: 30px;">1. 基础问法</h2>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">01背包是所有类型背包问题的基础，它又有各式各样的问法和约束，这些变化同样适用于其他类型的背包问题。</p>
<blockquote style="padding: 15px 20px; margin: 0 0 15px 0; font-size: 14px; border-left: 5px solid #ddd; background-color: rgba(102, 128, 153, 0.05);">
<p style="margin: 0 0 10px; margin-bottom: 0; line-height: 1.6; font-size: 14px; font-weight: 300; white-space: pre-wrap; word-wrap: break-word;">有n个物品，价值v = [v1,v2,v3...]，体积c = [c1,c2,c3...]，放入总容量为 <code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 2px 4px; color: #c7254e; background-color: #fff; white-space: nowrap; border-radius: 3px;">totalCapacity</code> 的背包中，求能获得的最大价值是多少？</p>
</blockquote><p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">背包问题是<code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 4px;">动态规划</code>的经典问题。动态规划的基础是递归，和分治一样，都是假设子问题已经解决，由子问题的解组合计算得到父问题的解，类似数列中的递推式如f(n) = f(n-1) + f(n-2)。但在递归的过程中会出现重复计算子问题的现象，为了避免重复计算，用一个表格记录子问题的结果供查找，<em>从下往上</em>进行递推。</p>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">找递推式（or 状态转移方程）的思路一般是由最终状态往前回溯，考察解答最终问题需要哪些子问题。</p>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">背包问题应用动态规划：</p>
<ol style="margin-top: 0; margin-bottom: 10px; line-height: 1.6;">
<li style="line-height: 1.6;"><strong style="font-weight: bold;">子问题</strong><br/>根据询问确定子问题，假设f[i][j] = 前i件物品中选取若干件放入空间为j的背包中所能得到的最大价值。</li>
<li style="line-height: 1.6;"><strong style="font-weight: bold;">递推式</strong>：  <ul style="margin-top: 0; margin-bottom: 0; line-height: 1.6;">
<li style="line-height: 1.6;">对第i件物品，不选择时，最大价值 = 前i-1件物品获得的最大价值 = f[i-1][j]；</li>
<li style="line-height: 1.6;">选择时，最大价值 = 前i-1件物品放入j-c[i]获得的最大价值 + i的价值 = f[i-1][j-c[i]] + v[i]；</li>
<li style="line-height: 1.6;">因此， <code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 4px;">f[i][j] = max(f[i-1][j],f[i-1][j-c[i]] + v[i])</code>；</li>
<li style="line-height: 1.6;">当然，若c[i] &gt; 背包总空间j，物品i只能不选，此时和第一种情况一样。</li>
</ul>
</li>
<li style="line-height: 1.6;"><strong style="font-weight: bold;">基础子问题的解</strong><br/>f[][0] = 背包空间为0时的最大价值（无法放物品） = 0，f[0][] = 没有物品可放时的最大价值 = 0（物品编号从1开始，0表示不放物品）。<br/><strong style="font-weight: bold;">注意，递推过程的是从第二行第二列开始的</strong>。</li>
</ol>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">举个例子，当 c=[3,4,5], v=[4,5,6]，totalCapacity=10 时，推导过程如下，注意，顺序是<strong style="font-weight: bold;">从上到下，从左到右一行一行（自底向上）</strong>地进行：</p>
<table style="border-collapse: collapse; border-spacing: 0; margin-bottom: 20px;">
<thead>
<tr>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">c</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">v</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"></th>
<th style="text-align: right; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">i</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">0</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">1</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">2</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">3</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">4</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">5</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">6</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">7</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">8</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">9</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">10</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"></td>
<td style="text-align: right; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">0</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 4px;">0</code></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><strong style="font-weight: bold;">0</strong></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><strong style="font-weight: bold;">0</strong></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><strong style="font-weight: bold;">0</strong></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><strong style="font-weight: bold;">0</strong></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><strong style="font-weight: bold;">0</strong></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><strong style="font-weight: bold;">0</strong></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><strong style="font-weight: bold;">0</strong></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><strong style="font-weight: bold;">0</strong></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><strong style="font-weight: bold;">0</strong></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><strong style="font-weight: bold;">0</strong></td>
</tr>
<tr>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">3</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">4</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"></td>
<td style="text-align: right; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">1</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 4px;">0</code></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">0</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">0</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">4</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">4</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">4</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">4</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">4</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">4</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">4</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">4</td>
</tr>
<tr>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">4</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">5</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"></td>
<td style="text-align: right; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">2</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 4px;">0</code></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">0</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">0</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">4</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">5</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">5</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">5</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">9</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">9</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">9</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">9</td>
</tr>
<tr>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">5</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">6</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"></td>
<td style="text-align: right; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">3</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 4px;">0</code></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">0</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">0</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">4</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">5</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">6</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">6</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">9</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">10</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">11</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">11</td>
</tr>
</tbody>
</table>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">代码：</p>
<pre style="overflow: initial; font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 14px; display: block; padding: 0; margin: 0 0 10px; line-height: 1.6; word-break: break-all; word-wrap: break-word; color: #333333; background-color: #f5f5f5; border: none; border-radius: 0; white-space: pre-wrap;" xml:space="preserve"><code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: inherit; padding: 1em; color: #f8f8f2; background-color: transparent; white-space: pre-wrap; border-radius: 0; display: block; background: #23241f;"><span style="color: #75715e;">#!/usr/bin/python</span>
<span style="color: #75715e;"># coding=utf-8</span>
n = <span style="color: #ae81ff;">3</span>                   <span style="color: #75715e;"># n个物品</span>
c = [<span style="color: #F92672;">None</span>,<span style="color: #ae81ff;">3</span>,<span style="color: #ae81ff;">4</span>,<span style="color: #ae81ff;">5</span>]        <span style="color: #75715e;"># capacity -- 注意，物品编号从1开始</span>
v = [<span style="color: #F92672;">None</span>,<span style="color: #ae81ff;">4</span>,<span style="color: #ae81ff;">5</span>,<span style="color: #ae81ff;">6</span>]        <span style="color: #75715e;"># value</span>
totalC = <span style="color: #ae81ff;">10</span>             <span style="color: #75715e;"># total capacity</span>

<span style="color: #F92672;"><span style="color: #66d9ef;">def</span> <span style="color: #a6e22e;">zeroOne</span><span style="color: #f8f8f2;">()</span>:</span>
    t = [[<span style="color: #F92672;">None</span>] * (totalC + <span style="color: #ae81ff;">1</span>) <span style="color: #F92672;">for</span> i <span style="color: #F92672;">in</span> range(n+<span style="color: #ae81ff;">1</span>) ]    <span style="color: #75715e;"># [n+1][totalCapacity+1]</span>

    <span style="color: #75715e;"># 初始化</span>
    t[<span style="color: #ae81ff;">0</span>] = [<span style="color: #ae81ff;">0</span>] * (totalC + <span style="color: #ae81ff;">1</span>)        <span style="color: #75715e;"># 第一行为0</span>
    <span style="color: #F92672;">for</span> i <span style="color: #F92672;">in</span> range(n+<span style="color: #ae81ff;">1</span>):            <span style="color: #75715e;"># 第一列为0</span>
        t[i][<span style="color: #ae81ff;">0</span>] = <span style="color: #ae81ff;">0</span>

    <span style="color: #F92672;">for</span> i <span style="color: #F92672;">in</span> range(<span style="color: #ae81ff;">1</span>,n+<span style="color: #ae81ff;">1</span>):             <span style="color: #75715e;"># 从第二行第二列开始扫描. i: 当前考察的物品, j: 总空间</span>
        <span style="color: #F92672;">for</span> j <span style="color: #F92672;">in</span> range(<span style="color: #ae81ff;">1</span>,totalC+<span style="color: #ae81ff;">1</span>):
            <span style="color: #F92672;">if</span> c[i] &gt; j:            <span style="color: #75715e;"># 无法放入第i个物品 -- 必定不选</span>
                t[i][j] = t[i-<span style="color: #ae81ff;">1</span>][j]
            <span style="color: #F92672;">else</span>:                    <span style="color: #75715e;"># 可以放入第i个物品 -- 可能选，可能不选</span>
                t[i][j] = max(t[i-<span style="color: #ae81ff;">1</span>][j], t[i-<span style="color: #ae81ff;">1</span>][j-c[i]] + v[i])
    <span style="color: #F92672;">return</span> t

<span style="color: #F92672;">if</span> __name__ == <span style="color: #e6db74;">"__main__"</span>:
    <span style="color: #F92672;">print</span> zeroOne()[n][totalC]
</code></pre>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">时间和空间复杂度为O(n*totalCapacity)。</p>
<h2 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 30px; margin-bottom: 20px; font-size: 30px;">2 求最大价值时的物品选择方案</h2>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">求最大价值下的物品选择方案有两种办法：</p>
<ol style="margin-top: 0; margin-bottom: 10px; line-height: 1.6;">
<li style="line-height: 1.6;">从后面往前，根据递推式依次看第i..1个物品有没有被选择：  <pre style="overflow: initial; font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 14px; display: block; padding: 0; margin: 0 0 10px; line-height: 1.6; word-break: break-all; word-wrap: break-word; color: #333333; background-color: #f5f5f5; border: none; border-radius: 0; white-space: pre-wrap;" xml:space="preserve"><code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: inherit; padding: 1em; color: #f8f8f2; background-color: transparent; white-space: pre-wrap; border-radius: 0; display: block; background: #23241f;"> t = zeroOne()
 <span style="color: #75715e;"># print path 方法1</span>
 i = n
 j = totalC
 <span style="color: #F92672;">while</span> i &gt; <span style="color: #ae81ff;">0</span> <span style="color: #F92672;">and</span> j &gt; <span style="color: #ae81ff;">0</span>:
     <span style="color: #F92672;">if</span> t[i][j] != t[i-<span style="color: #ae81ff;">1</span>][j]:    <span style="color: #75715e;"># 选了第i个物品</span>
         <span style="color: #F92672;">print</span> <span style="color: #e6db74;">"第%s个物品，空间：%s，价值：%s"</span> % (i,c[i],v[i])
         j -= c[i]
     <span style="color: #75715e;"># 考察前一个物品</span>
     i -= <span style="color: #ae81ff;">1</span>
</code></pre>
</li>
<li style="line-height: 1.6;"><p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">在求最大价值的同时用一个n*totalCapacity大小的二维数组path记录每个物品是否选择：</p>
<pre style="overflow: initial; font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 14px; display: block; padding: 0; margin: 0 0 10px; line-height: 1.6; word-break: break-all; word-wrap: break-word; color: #333333; background-color: #f5f5f5; border: none; border-radius: 0; white-space: pre-wrap;" xml:space="preserve"><code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: inherit; padding: 1em; color: #f8f8f2; background-color: transparent; white-space: pre-wrap; border-radius: 0; display: block; background: #23241f;"><span style="color: #F92672;"><span style="color: #66d9ef;">def</span> <span style="color: #a6e22e;">zeroOneWithPath</span><span style="color: #f8f8f2;">()</span>:</span>
t = [[<span style="color: #F92672;">None</span>] * (totalC + <span style="color: #ae81ff;">1</span>) <span style="color: #F92672;">for</span> i <span style="color: #F92672;">in</span> range(n+<span style="color: #ae81ff;">1</span>) ]    <span style="color: #75715e;"># [n+1][totalCapacity+1]</span>
path = [[<span style="color: #ae81ff;">0</span>] * (totalC + <span style="color: #ae81ff;">1</span>) <span style="color: #F92672;">for</span> i <span style="color: #F92672;">in</span> range(n+<span style="color: #ae81ff;">1</span>) ]        <span style="color: #75715e;"># path, 0没选，1选了</span>

<span style="color: #75715e;"># 初始化</span>
t[<span style="color: #ae81ff;">0</span>] = [<span style="color: #ae81ff;">0</span>] * (totalC + <span style="color: #ae81ff;">1</span>)        <span style="color: #75715e;"># 第一行为0</span>
<span style="color: #F92672;">for</span> i <span style="color: #F92672;">in</span> range(n+<span style="color: #ae81ff;">1</span>):            <span style="color: #75715e;"># 第一列为0</span>
    t[i][<span style="color: #ae81ff;">0</span>] = <span style="color: #ae81ff;">0</span>

<span style="color: #F92672;">for</span> i <span style="color: #F92672;">in</span> range(<span style="color: #ae81ff;">1</span>,n+<span style="color: #ae81ff;">1</span>):             <span style="color: #75715e;"># 从第二行第二列开始扫描. i: 当前考察的物品, j: 总空间</span>
    <span style="color: #F92672;">for</span> j <span style="color: #F92672;">in</span> range(<span style="color: #ae81ff;">1</span>,totalC+<span style="color: #ae81ff;">1</span>):
        <span style="color: #F92672;">if</span> c[i] &gt; j:            <span style="color: #75715e;"># 无法放入第i个物品 -- 必定不选</span>
            t[i][j] = t[i-<span style="color: #ae81ff;">1</span>][j]
        <span style="color: #F92672;">else</span>:                    <span style="color: #75715e;"># 可以放入第i个物品 -- 可能不选，可能选</span>
            t[i][j] = max(t[i-<span style="color: #ae81ff;">1</span>][j], t[i-<span style="color: #ae81ff;">1</span>][j-c[i]] + v[i])
            <span style="color: #75715e;"># 如果选择了第i个物品，记录path         </span>
            <span style="color: #F92672;">if</span> t[i][j] == t[i-<span style="color: #ae81ff;">1</span>][j-c[i]] + v[i]:        <span style="color: #75715e;"># &lt;----- 只有这一个改动</span>
                path[i][j] = <span style="color: #ae81ff;">1</span>

<span style="color: #F92672;">return</span> t,path
</code></pre>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">求物品选择方案的方法和前一种办法是一模一样的，只不过现在是根据path中的标记位，而不是最大价值与递推式来判断是否选择了该物品：</p>
<pre style="overflow: initial; font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 14px; display: block; padding: 0; margin: 0 0 10px; line-height: 1.6; word-break: break-all; word-wrap: break-word; color: #333333; background-color: #f5f5f5; border: none; border-radius: 0; white-space: pre-wrap;" xml:space="preserve"><code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: inherit; padding: 1em; color: #f8f8f2; background-color: transparent; white-space: pre-wrap; border-radius: 0; display: block; background: #23241f;"><span style="color: #75715e;"># print path 方法2</span>
t,path = zeroOneWithPath()
i = n
j = totalC
<span style="color: #F92672;">while</span> i &gt; <span style="color: #ae81ff;">0</span> <span style="color: #F92672;">and</span> j &gt; <span style="color: #ae81ff;">0</span>:
    <span style="color: #F92672;">if</span> path[i][j] == <span style="color: #ae81ff;">1</span>:    <span style="color: #75715e;"># 选了第i个物品             # &lt;----- 只有这一个改动</span>
        <span style="color: #F92672;">print</span> <span style="color: #e6db74;">"第%s个物品，空间：%s，价值：%s"</span> % (i,c[i],v[i])
        j -= c[i]
    i -= <span style="color: #ae81ff;">1</span>
</code></pre>
</li>
</ol>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">实际上，两种方法的思路是一样的，不过方法2消耗的空间更多，但下面要讲的O(n)空间复杂度的算法只能使用方法2。</p>
<h2 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 30px; margin-bottom: 20px; font-size: 30px;">3 空间优化</h2>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">接下来讨论怎样将算法的空间复杂度降低到O(totalCapacity)。实际上，这里用到的思路就是所谓的 <em>滚动数组</em>：</p>
<blockquote style="padding: 15px 20px; margin: 0 0 15px 0; font-size: 14px; border-left: 5px solid #ddd; background-color: rgba(102, 128, 153, 0.05);">
<p style="margin: 0 0 10px; margin-bottom: 0; line-height: 1.6; font-size: 14px; font-weight: 300; white-space: pre-wrap; word-wrap: break-word;">很多情况下，一个问题的解仅由其前面<em>有限个</em>子问题决定，除了这些子问题，之前记录的规模更小的子问题的解都可以舍去，所以，可以用更少的空间只保存这些子问题的解并循环利用，从而避免保存所有子问题的解。</p>
</blockquote><p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">举个例子，斐波那契数列问题中，<code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 4px;">f(n)=f(n-1)+f(n-2)</code>，当n为5时，f(5)仅与f(4)和f(3)有关，f(0)..f(2)都没有用了。因此，我们可以只用两个变量不停地维护f(n-1)和f(n-2)，而不是将f(0)..f(n-1)的结果都保存起来。</p>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">回到01背包问题，求某个格子时，<strong style="font-weight: bold;">其值是由上一行的某两个格子（正上方的格子和左侧某一个格子）决定的，与更早的行没有关系</strong>，这些行的空间都被浪费了：</p>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;"><img alt="Alt text" class="en-media" longdesc="./屏幕快照 2014-06-28 上午10.28.16.png" name="15005da7-e83b-4f26-bc09-762e40a44d89" src="/assets/img/96b34a556ac94118fb00722e00620749.png" style="border: 0; max-width: 100%;"/></p>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">所以，我们可以只用一行的空间保存前一行的值并循环利用，而不需要一个表格。但此时 <strong style="font-weight: bold;">递推顺序不能是从左到右了，而是应该反过来</strong>，因为如果是正序，在递推的时候用的就是第i行的新值，而非前一行的数据了。实际上，用表格时也可以从右到左递推。</p>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">代码：</p>
<pre style="overflow: initial; font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 14px; display: block; padding: 0; margin: 0 0 10px; line-height: 1.6; word-break: break-all; word-wrap: break-word; color: #333333; background-color: #f5f5f5; border: none; border-radius: 0; white-space: pre-wrap;" xml:space="preserve"><code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: inherit; padding: 1em; color: #f8f8f2; background-color: transparent; white-space: pre-wrap; border-radius: 0; display: block; background: #23241f;"><span style="color: #F92672;"><span style="color: #66d9ef;">def</span> <span style="color: #a6e22e;">zeroOne2</span><span style="color: #f8f8f2;">()</span>:</span>
    t = [<span style="color: #ae81ff;">0</span>] * (totalC + <span style="color: #ae81ff;">1</span>)
    <span style="color: #F92672;">for</span> i <span style="color: #F92672;">in</span> range(<span style="color: #ae81ff;">1</span>,n+<span style="color: #ae81ff;">1</span>):        <span style="color: #75715e;"># for i in 1..n, i是物品编号</span>
        <span style="color: #F92672;">for</span> j <span style="color: #F92672;">in</span> reversed(range(c[i],totalC+<span style="color: #ae81ff;">1</span>)):    <span style="color: #75715e;"># for j in totalC..c[i], j是背包总空间 //j&lt;物品体积c[i]时，i必定不选，c[i][j]=c[i-1][j]，不用考察</span>
            t[j] = max(t[j],t[j-c[i]] + v[i]) 
    <span style="color: #F92672;">return</span> t

<span style="color: #F92672;">if</span> __name__ == <span style="color: #e6db74;">"__main__"</span>:
    <span style="color: #F92672;">print</span> zeroOne2()[totalC]
</code></pre>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">时间复杂度仍为O(n*totalCapacity)，空间复杂度降低到了O(totalCapacity)。此时如果想要求最优价值的物品选择方案，只能用额外的path表格记录。</p>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">此类优化方式大部分的背包问题都可应用，后续不再赘述。</p>
<h2 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 30px; margin-bottom: 20px; font-size: 30px;">4 要求刚好装满</h2>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">背包问题常见的一个限制是需要背包刚好装满，在该约束下需要注意两点：</p>
<ol style="margin-top: 0; margin-bottom: 10px; line-height: 1.6;">
<li style="line-height: 1.6;">在使用递推式推导的过程中必须考虑 <strong style="font-weight: bold;">子问题是否有解</strong> ;</li>
<li style="line-height: 1.6;"><strong style="font-weight: bold;">基础子问题的含义/解</strong><br/> 当求最大价值时，规定当无解时用NULL表示，其他值表示刚好能装满的最大价值：<ul style="margin-top: 0; margin-bottom: 0; line-height: 1.6;">
<li style="line-height: 1.6;">第一列 f[][0] = 背包空间为0，认为永远是满的，且无法放物品 = 0  </li>
<li style="line-height: 1.6;">第一行（除第一个） f[0][1..totalCapacity] = 没有物品可放，此时除了空间为0的背包，其他背包永远不可能放满 = NULL</li>
<li style="line-height: 1.6;">其他变种问题类似。</li>
</ul>
</li>
</ol>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">以上两点适用于所有需要装满背包的场景。</p>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">求最大价值的推导过程如下：</p>
<table style="border-collapse: collapse; border-spacing: 0; margin-bottom: 20px;">
<thead>
<tr>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">c</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">v</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"></th>
<th style="text-align: right; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">i</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">0</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">1</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">2</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">3</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">4</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">5</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">6</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">7</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">8</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">9</th>
<th style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">10</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"></td>
<td style="text-align: right; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">0</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 4px;">0</code></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><strong style="font-weight: bold;">Null</strong></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><strong style="font-weight: bold;">Null</strong></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><strong style="font-weight: bold;">Null</strong></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><strong style="font-weight: bold;">Null</strong></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><strong style="font-weight: bold;">Null</strong></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><strong style="font-weight: bold;">Null</strong></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><strong style="font-weight: bold;">Null</strong></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><strong style="font-weight: bold;">Null</strong></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><strong style="font-weight: bold;">Null</strong></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><strong style="font-weight: bold;">Null</strong></td>
</tr>
<tr>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">3</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">4</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"></td>
<td style="text-align: right; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">1</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 4px;">0</code></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><em>null</em></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><em>null</em></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">4</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><em>null</em></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><em>null</em></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><em>null</em></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><em>null</em></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><em>null</em></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><em>null</em></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><em>null</em></td>
</tr>
<tr>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">4</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">5</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"></td>
<td style="text-align: right; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">2</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 4px;">0</code></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><em>null</em></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><em>null</em></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">4</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">5</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><em>null</em></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><em>null</em></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">9</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><em>null</em></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><em>null</em></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><em>null</em></td>
</tr>
<tr>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">5</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">6</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"></td>
<td style="text-align: right; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">3</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 4px;">0</code></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><em>null</em></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><em>null</em></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">4</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">5</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">6</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><em>null</em></td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">9</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">10</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;">11</td>
<td style="text-align: center; padding: 8px; line-height: 20px; vertical-align: top; border: 1px solid #DDD;"><em>null</em></td>
</tr>
</tbody>
</table>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">代码：</p>
<pre style="overflow: initial; font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 14px; display: block; padding: 0; margin: 0 0 10px; line-height: 1.6; word-break: break-all; word-wrap: break-word; color: #333333; background-color: #f5f5f5; border: none; border-radius: 0; white-space: pre-wrap;" xml:space="preserve"><code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: inherit; padding: 1em; color: #f8f8f2; background-color: transparent; white-space: pre-wrap; border-radius: 0; display: block; background: #23241f;"><span style="color: #F92672;"><span style="color: #66d9ef;">def</span> <span style="color: #a6e22e;">zeroOneFullPack</span><span style="color: #f8f8f2;">()</span>:</span>
    t = [[<span style="color: #F92672;">None</span>] * (totalC + <span style="color: #ae81ff;">1</span>) <span style="color: #F92672;">for</span> i <span style="color: #F92672;">in</span> range(n+<span style="color: #ae81ff;">1</span>) ]    <span style="color: #75715e;"># [n+1][totalCapacity+1]</span>

    <span style="color: #75715e;"># 初始化</span>
    t[<span style="color: #ae81ff;">0</span>] = [<span style="color: #F92672;">None</span>] * (totalC + <span style="color: #ae81ff;">1</span>)    <span style="color: #75715e;"># t[0][1..totalCapacity] = None</span>
    <span style="color: #F92672;">for</span> i <span style="color: #F92672;">in</span> range(n+<span style="color: #ae81ff;">1</span>):            <span style="color: #75715e;"># t[][0] = 0</span>
        t[i][<span style="color: #ae81ff;">0</span>] = <span style="color: #ae81ff;">0</span>

    <span style="color: #F92672;">for</span> i <span style="color: #F92672;">in</span> range(<span style="color: #ae81ff;">1</span>,n+<span style="color: #ae81ff;">1</span>):         
        <span style="color: #F92672;">for</span> j <span style="color: #F92672;">in</span> range(<span style="color: #ae81ff;">1</span>,totalC+<span style="color: #ae81ff;">1</span>):
            <span style="color: #F92672;">if</span> c[i] &gt; j:            <span style="color: #75715e;"># 无法放入第i个物品 -- 必定不选</span>
                t[i][j] = t[i-<span style="color: #ae81ff;">1</span>][j]
            <span style="color: #F92672;">else</span>:                   <span style="color: #75715e;"># 可以放入第i个物品</span>
                a = t[i-<span style="color: #ae81ff;">1</span>][j-c[i]]  <span style="color: #75715e;"># a: 前i-1个物品放入j-c[i]空间</span>
                b = t[i-<span style="color: #ae81ff;">1</span>][j]       <span style="color: #75715e;"># b: 前i-1个物品放入j空间</span>

                <span style="color: #F92672;">if</span> a != <span style="color: #F92672;">None</span> <span style="color: #F92672;">and</span> b != <span style="color: #F92672;">None</span>:     <span style="color: #75715e;"># a和b都有解，则用递推式</span>
                    t[i][j] = max(b,a + v[i])
                <span style="color: #F92672;">elif</span> a == <span style="color: #F92672;">None</span> <span style="color: #F92672;">and</span> b == <span style="color: #F92672;">None</span>:   <span style="color: #75715e;"># a和b都无解，则无解   </span>
                    t[i][j] = <span style="color: #F92672;">None</span>
                <span style="color: #F92672;">elif</span> a == <span style="color: #F92672;">None</span>:                 <span style="color: #75715e;"># a无解而b有解，此时一定不能选择物品i，选择则无解</span>
                    t[i][j] = b
                <span style="color: #F92672;">elif</span> b == <span style="color: #F92672;">None</span>:                 <span style="color: #75715e;"># a有解而b无解，此时只能选择i，不选则无解</span>
                    t[i][j] = a + v[i]
    <span style="color: #F92672;">return</span> t

<span style="color: #F92672;">if</span> __name__ == <span style="color: #e6db74;">"__main__"</span>:
    <span style="color: #F92672;">print</span> zeroOneFullPack()[n][totalC]
</code></pre>
<h2 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 30px; margin-bottom: 20px; font-size: 30px;">5 只考虑物品空间，忽略价值</h2>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">有时题目只关心物品的体积，而不涉及物品的价值，下面提到的几类问题都是如此。</p>
<h3 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 30px; margin-bottom: 20px; font-size: 24px;">5.1 求能获取的最大体积</h3>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">比较常见，简化的01背包问题，每个物品的价值即为其体积，代码略。</p>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">例子：  </p>
<ul style="margin-top: 0; margin-bottom: 10px; line-height: 1.6;">
<li style="line-height: 1.6;">给一个整数的集合，要把它分成两个集合，要两个集合的数的和最接近</li>
</ul>
<h3 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 30px; margin-bottom: 20px; font-size: 24px;">5.2 求刚好装满背包的方案数</h3>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">类似的：</p>
<ol style="margin-top: 0; margin-bottom: 10px; line-height: 1.6;">
<li style="line-height: 1.6;"><strong style="font-weight: bold;">子问题</strong><br/> f[i][j]为前i件物品放入j空间，刚好装满的方案数，无解时为0</li>
<li style="line-height: 1.6;"><strong style="font-weight: bold;">递推式</strong> <ul style="margin-top: 0; margin-bottom: 0; line-height: 1.6;">
<li style="line-height: 1.6;"><code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 4px;">f[i][j] = f[i-1][j] (不选i) + f[i-1][j-c[i]] (选i)</code><br/>如果不选i，"前i件物品装满j空间的方案数" 等于 "前i-1件物品装满j空间的方案数" ；选i，则等于"前i-1件物品装满j-c[i]空间的方案数"。二者相加即为f[i][j]。</li>
<li style="line-height: 1.6;">c[i] &gt; j时一定不能选i，f[i][j] = f[i-1][j]</li>
</ul>
</li>
<li style="line-height: 1.6;"><strong style="font-weight: bold;">基础子问题的解</strong><br/> 和 <em>求装满条件下最大价值</em> 的场景一样，<ul style="margin-top: 0; margin-bottom: 0; line-height: 1.6;">
<li style="line-height: 1.6;">第一列 f[][0] = 背包空间为0，认为永远是满的，只有一种装满的方案（不放物品） = 1</li>
<li style="line-height: 1.6;">第一行（除第一个） f[0][1..totalCapacity] = 没有物品可放，此时除了空间为0的背包，其他背包永远不可能放满 = 0 </li>
</ul>
</li>
</ol>
<pre style="overflow: initial; font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 14px; display: block; padding: 0; margin: 0 0 10px; line-height: 1.6; word-break: break-all; word-wrap: break-word; color: #333333; background-color: #f5f5f5; border: none; border-radius: 0; white-space: pre-wrap;" xml:space="preserve"><code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: inherit; padding: 1em; color: #f8f8f2; background-color: transparent; white-space: pre-wrap; border-radius: 0; display: block; background: #23241f;"><span style="color: #F92672;"><span style="color: #66d9ef;">def</span> <span style="color: #a6e22e;">waysToFillPack</span><span style="color: #f8f8f2;">()</span>:</span>
    t = [[<span style="color: #F92672;">None</span>] * (totalC + <span style="color: #ae81ff;">1</span>) <span style="color: #F92672;">for</span> i <span style="color: #F92672;">in</span> range(n+<span style="color: #ae81ff;">1</span>) ]    <span style="color: #75715e;"># [n+1][totalCapacity+1]</span>

    <span style="color: #75715e;"># 初始化</span>
    t[<span style="color: #ae81ff;">0</span>] = [<span style="color: #F92672;">None</span>] * (totalC + <span style="color: #ae81ff;">1</span>)    <span style="color: #75715e;"># t[0][1..totalCapacity] = None</span>
    <span style="color: #F92672;">for</span> i <span style="color: #F92672;">in</span> range(n+<span style="color: #ae81ff;">1</span>):            <span style="color: #75715e;"># t[][0] = 1</span>
        t[i][<span style="color: #ae81ff;">0</span>] = <span style="color: #ae81ff;">1</span>

    <span style="color: #F92672;">for</span> i <span style="color: #F92672;">in</span> range(<span style="color: #ae81ff;">1</span>,n+<span style="color: #ae81ff;">1</span>):         
        <span style="color: #F92672;">for</span> j <span style="color: #F92672;">in</span> range(<span style="color: #ae81ff;">1</span>,totalC+<span style="color: #ae81ff;">1</span>):
            <span style="color: #F92672;">if</span> c[i] &gt; j:            <span style="color: #75715e;"># 无法放入第i个物品 -- 必定不选</span>
                t[i][j] = t[i-<span style="color: #ae81ff;">1</span>][j]
            <span style="color: #F92672;">else</span>:
                a = t[i-<span style="color: #ae81ff;">1</span>][j-c[i]]  <span style="color: #75715e;"># a: 前i-1个物品放入j-c[i]空间</span>
                b = t[i-<span style="color: #ae81ff;">1</span>][j]       <span style="color: #75715e;"># b: 前i-1个物品放入j空间</span>

                <span style="color: #F92672;">if</span> a != <span style="color: #F92672;">None</span> <span style="color: #F92672;">and</span> b != <span style="color: #F92672;">None</span>:     <span style="color: #75715e;"># a和b都有解，则用递推式    &lt;---- 仅仅递推式不同而已</span>
                    t[i][j] = a + b
                <span style="color: #F92672;">elif</span> a == <span style="color: #F92672;">None</span> <span style="color: #F92672;">and</span> b == <span style="color: #F92672;">None</span>:   <span style="color: #75715e;"># a和b都无解，则无解   </span>
                    t[i][j] = <span style="color: #F92672;">None</span>
                <span style="color: #F92672;">elif</span> a == <span style="color: #F92672;">None</span>:                 <span style="color: #75715e;"># a无解而b有解，此时一定不能选择物品i</span>
                    t[i][j] = b
                <span style="color: #F92672;">elif</span> b == <span style="color: #F92672;">None</span>:                 <span style="color: #75715e;"># a有解而b无解，此时只能选择i</span>
                    t[i][j] = a

    <span style="color: #F92672;">return</span> t
</code></pre>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">例子：  </p>
<ul style="margin-top: 0; margin-bottom: 10px; line-height: 1.6;">
<li style="line-height: 1.6;">有不同面额的若干钱币，每种面额只有一个，求表示给定面值的方案数</li>
</ul>
<h3 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 30px; margin-bottom: 20px; font-size: 24px;">5.3 求刚好装满背包的最少/多选择物品数</h3>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">以最少为例：  </p>
<ol style="margin-top: 0; margin-bottom: 10px; line-height: 1.6;">
<li style="line-height: 1.6;"><strong style="font-weight: bold;">子问题</strong><br/> f[i][j]为前i件物品放入j空间，刚好装满的最少物品数，用None表示无解</li>
<li style="line-height: 1.6;"><strong style="font-weight: bold;">递推式</strong> <ul style="margin-top: 0; margin-bottom: 0; line-height: 1.6;">
<li style="line-height: 1.6;"><code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 4px;">f[i][j] = min{ f[i-1][j] (不选i), f[i-1][j-c[i]] + 1 (选i) }</code> </li>
<li style="line-height: 1.6;">c[i] &gt; j时一定不能选i，f[i][j] = f[i-1][j]</li>
</ul>
</li>
<li style="line-height: 1.6;"><strong style="font-weight: bold;">基础子问题的解</strong> <ul style="margin-top: 0; margin-bottom: 0; line-height: 1.6;">
<li style="line-height: 1.6;">第一列 f[][0] = 背包空间为0，认为永远是满的，选择物品数为0 = 0</li>
<li style="line-height: 1.6;">第一行（除第一个） f[0][1..totalCapacity] = 没有物品可放，此时除了空间为0的背包，其他背包不存在装满的方案 = None </li>
</ul>
</li>
</ol>
<pre style="overflow: initial; font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 14px; display: block; padding: 0; margin: 0 0 10px; line-height: 1.6; word-break: break-all; word-wrap: break-word; color: #333333; background-color: #f5f5f5; border: none; border-radius: 0; white-space: pre-wrap;" xml:space="preserve"><code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: inherit; padding: 1em; color: #f8f8f2; background-color: transparent; white-space: pre-wrap; border-radius: 0; display: block; background: #23241f;"><span style="color: #75715e;"># 装满时的最少物品数</span>
<span style="color: #F92672;"><span style="color: #66d9ef;">def</span> <span style="color: #a6e22e;">leastObjFillPack</span><span style="color: #f8f8f2;">()</span>:</span>
    t = [[<span style="color: #F92672;">None</span>] * (totalC + <span style="color: #ae81ff;">1</span>) <span style="color: #F92672;">for</span> i <span style="color: #F92672;">in</span> range(n+<span style="color: #ae81ff;">1</span>) ]    <span style="color: #75715e;"># [n+1][totalCapacity+1]</span>

    <span style="color: #75715e;"># 初始化</span>
    t[<span style="color: #ae81ff;">0</span>] = [<span style="color: #F92672;">None</span>] * (totalC + <span style="color: #ae81ff;">1</span>)    <span style="color: #75715e;"># t[0][1..totalCapacity] = None</span>
    <span style="color: #F92672;">for</span> i <span style="color: #F92672;">in</span> range(n+<span style="color: #ae81ff;">1</span>):            <span style="color: #75715e;"># t[][0] = 0</span>
        t[i][<span style="color: #ae81ff;">0</span>] = <span style="color: #ae81ff;">0</span>

    <span style="color: #F92672;">for</span> i <span style="color: #F92672;">in</span> range(<span style="color: #ae81ff;">1</span>,n+<span style="color: #ae81ff;">1</span>):         
        <span style="color: #F92672;">for</span> j <span style="color: #F92672;">in</span> range(<span style="color: #ae81ff;">1</span>,totalC+<span style="color: #ae81ff;">1</span>):
            <span style="color: #F92672;">if</span> c[i] &gt; j:            <span style="color: #75715e;"># 无法放入第i个物品 -- 必定不选</span>
                t[i][j] = t[i-<span style="color: #ae81ff;">1</span>][j]
            <span style="color: #F92672;">else</span>:
                a = t[i-<span style="color: #ae81ff;">1</span>][j-c[i]]  <span style="color: #75715e;"># a: 前i-1个物品放入j-c[i]空间</span>
                b = t[i-<span style="color: #ae81ff;">1</span>][j]       <span style="color: #75715e;"># b: 前i-1个物品放入j空间</span>

                <span style="color: #F92672;">if</span> a != <span style="color: #F92672;">None</span> <span style="color: #F92672;">and</span> b != <span style="color: #F92672;">None</span>:     <span style="color: #75715e;"># a和b都有解，则用递推式</span>
                    t[i][j] = min(b,a+<span style="color: #ae81ff;">1</span>)
                <span style="color: #F92672;">elif</span> a == <span style="color: #F92672;">None</span> <span style="color: #F92672;">and</span> b == <span style="color: #F92672;">None</span>:   <span style="color: #75715e;"># a和b都无解，则无解   </span>
                    t[i][j] = <span style="color: #F92672;">None</span>
                <span style="color: #F92672;">elif</span> a == <span style="color: #F92672;">None</span>:                 <span style="color: #75715e;"># a无解而b有解，此时一定不能选择物品i</span>
                    t[i][j] = b
                <span style="color: #F92672;">elif</span> b == <span style="color: #F92672;">None</span>:                 <span style="color: #75715e;"># a有解而b无解，此时只能选择i</span>
                    t[i][j] = a + <span style="color: #ae81ff;">1</span>

    <span style="color: #F92672;">return</span> t
</code></pre>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">例子：  </p>
<ul style="margin-top: 0; margin-bottom: 10px; line-height: 1.6;">
<li style="line-height: 1.6;">有不同面额的若干硬币，每种面额只有一个，求最少需要多少硬币表示给定面值</li>
</ul>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">除了上述几种情况，背包问题还有很多其他变种，不过基本思路和递推过程都是一样的，其核心都在于 1)根据询问的不同找到正确的递推式（<code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 4px;">min|max|sum...</code>）；2)确定基础子问题的解。</p>
<h1 style="font-size: 36px; margin: 0.67em 0; font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 30px; margin-bottom: 20px;">二. 完全背包</h1>
<h2 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 30px; margin-bottom: 20px; font-size: 30px;">1. 基本解法</h2>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">完全背包指每种物品有无数件，它和01背包的区别只有递推式的一个地方：</p>
<ul style="margin-top: 0; margin-bottom: 10px; line-height: 1.6;">
<li style="line-height: 1.6;">01  : f[i][j] = max(f[i-1][j],<code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 4px;">f[i-1][j-c[i]]</code> + v[i])</li>
<li style="line-height: 1.6;">完全：f[i][j] = max(f[i-1][j],<code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 4px;">f[i][j-c[i]]</code> + v[i])</li>
</ul>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">解释：<br/>考虑第i种物品，若不选，则f[i][j] = f[i-1][j]；若选择，意味着至少有一件i物品，考虑这一件物品，剩余j-c[i]空间用来放 <em>0..i种</em> 物品（i依然能放），这部分空间的最大价值为f[i][j-c[i]]。综合即可得到上述公式。</p>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">直观的，在递推时，01背包依赖的是<strong style="font-weight: bold;">上一行的某两个格子（正上方和左侧）</strong>，完全背包则依赖<strong style="font-weight: bold;">上一行正上方的格子 + 同一行左侧的某个格子</strong>。</p>
<h2 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 30px; margin-bottom: 20px; font-size: 30px;">2. 空间优化</h2>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">与01背包类似，但是这里遍历顺序 <strong style="font-weight: bold;">不要逆序</strong> 了，即此时需要从左向右递推。因为01背包递推时f[i-1][j-c[i]]是上一行的值，而完全背包f[i][j-c[i]]则刚好是本行的新值。</p>
<h1 style="font-size: 36px; margin: 0.67em 0; font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 30px; margin-bottom: 20px;">三. 多重背包</h1>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">指的是第i个物品有n[i]件，此时直观上可以将每个物品拆成n[i]个单个物品，转化为01背包问题。但当n[i]比较大时物品件数将急剧增加，为了避免这种情况可以使用 <code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 4px;">二进制拆分法</code>，降低拆分后的物品数。</p>
<h2 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 30px; margin-bottom: 20px; font-size: 30px;">1. 二进制拆分</h2>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">原理：</p>
<blockquote style="padding: 15px 20px; margin: 0 0 15px 0; font-size: 14px; border-left: 5px solid #ddd; background-color: rgba(102, 128, 153, 0.05);">
<p style="margin: 0 0 10px; margin-bottom: 0; line-height: 1.6; font-size: 14px; font-weight: 300; white-space: pre-wrap; word-wrap: break-word;">一个正整数n可以被分解成1,2,4,…,2^(k-1),n-(2^k+1)(即n-前面数的和), k是满足n&gt;2^k+1的最大整数，且1～n之内的所有整数均可以唯一表示成这些数中某几个数的和的形式。</p>
</blockquote><p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">代码更容易理解些：</p>
<pre style="overflow: initial; font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 14px; display: block; padding: 0; margin: 0 0 10px; line-height: 1.6; word-break: break-all; word-wrap: break-word; color: #333333; background-color: #f5f5f5; border: none; border-radius: 0; white-space: pre-wrap;" xml:space="preserve"><code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: inherit; padding: 1em; color: #f8f8f2; background-color: transparent; white-space: pre-wrap; border-radius: 0; display: block; background: #23241f;"><span style="color: #F92672;">var</span> result = [];
<span style="color: #F92672;">var</span> n = ..;

<span style="color: #75715e;">// 1,2,4,8...直到&gt;n (不包括最后一个数字)</span>
<span style="color: #F92672;">for</span>(i=<span style="color: #ae81ff;">1</span>;i&lt;=n;i*=<span style="color: #ae81ff;">2</span>){
    result.push(i);
    n-=i;
}

<span style="color: #75715e;">// n剩下的部分</span>
<span style="color: #F92672;">if</span>(n&gt;<span style="color: #ae81ff;">0</span>)
    result.push(n);
</code></pre>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">比如13可以拆分成1/2/4/6，1～13均可由这些数凑成。将件数为13，价值为v的物品拆分成1*v,2*v,4*v,6*v这4件物品后，<strong style="font-weight: bold;">该物品的任意选择（1件/2件..13件）均可由它们表达</strong>，如选择10件该物品 = 选择物品4*v + 选择物品6*v。和简单拆分相比，该拆分方式不但达到了同样的效果，拆分后的个数也由n下降到log2(n)，即n的二进制表示的位数。</p>
<h1 style="font-size: 36px; margin: 0.67em 0; font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 30px; margin-bottom: 20px;">参考文档</h1>
<ul style="margin-top: 0; margin-bottom: 10px; line-height: 1.6;">
<li style="line-height: 1.6;"><a href="http://blog.csdn.net/wumuzi520/article/category/942383" style="background: transparent;" target="_blank">背包问题——“01背包”详解及实现（包含背包中具体物品的求解）</a></li>
<li style="line-height: 1.6;"><a href="http://dongxicheng.org/structure/knapsack-problems/" style="background: transparent;" target="_blank">背包问题应用</a></li>
<li style="line-height: 1.6;"><a href="http://blog.csdn.net/jkay_wong/article/details/7240588" style="background: transparent;" target="_blank">多重背包的二进制分解思想</a></li>
</ul>
</div>
</article> <!-- end #post__content -->

<div id="post__share">
  <a id="icon-twitter" class="fontello" href="https://twitter.com/intent/tweet?url=http://novoland.github.io/%E7%AE%97%E6%B3%95/2014/07/26/%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98.html&text=背包问题" target="_blank"></a>
  <a id="icon-cc" class="fontello" href="http://creativecommons.org/licenses/by-nc-sa/3.0" target="_blank"></a>
  <a id="icon-weibo" class="fontello" href="http://v.t.sina.com.cn/share/share.php?url=http://novoland.github.io/%E7%AE%97%E6%B3%95/2014/07/26/%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98.html&title=背包问题" target="_blank"></a>
</div> <!-- end #post__share -->

<div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink" target="_blank">Loading Disqus comments...</a>
</div> <!-- end #disqus_thread -->

<p id="copyright">Powered by <a href="http://jekyllrb.com" target="_blank">Jekyll</a>&nbsp;&nbsp;|&nbsp;&nbsp;Theme <a href="https://github.com/P233/3-Jekyll" target="_blank">3-Jekyll</a></p>
      </div> <!-- end #pjax -->

      <div id="post__toc-trigger">
        <div id="post__toc">
          <span id="post__toc-title">Table of Contents</span>
          <ul id="post__toc-ul"></ul>
        </div>
      </div>
    </div> <!-- end #post -->

    <button id="js-fullscreen"><span id="icon-arrow" class="fontello"></span></button>

    <script src="/assets/js/jquery-2.0.3.min.js"></script>
    <script src="/assets/js/jquery.pjax.js"></script>
    <script src="/assets/js/nprogress.js"></script>
    <script src="/assets/js/script.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  </body>
</html>
